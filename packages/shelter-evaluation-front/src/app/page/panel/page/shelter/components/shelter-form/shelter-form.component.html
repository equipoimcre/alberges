<div class="bg-white p-4 mb-4">
  <div *ngIf="!shelterDto || shelterDto">
    <h2 *ngIf="validateMode" class="mb-4" i18n="@@shelter.form.title.validate">Validate shelter</h2>
    <h2 *ngIf="!validateMode" class="mb-4" i18n="@@shelter.form.title.create">Create shelter</h2>
    <form [formGroup]="shelterForm" (submit)="submitShelter()" class="grid mb-4">
      <div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
        <div class="flex flex-col">
          <label for="community" class="mx-4" i18n="@@common.community">Autonomous community</label>
          <select 
            id="community" 
            formControlName="communityId" 
            class="form-select" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.communityId.valid && this.shelterForm.controls.communityId.touched }">
            <option *ngFor="let community of communityList" [value]="community.id" [attr.disabled]="validateMode || displayMode ? true : null">{{community.name}}</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label for="province" class="mx-4" i18n="@@common.province">Province</label>
          <select 
            id="province" 
            formControlName="provinceId" 
            class="form-select" 
            [attr.disabled]="provinceList.length===0 || validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.provinceId.valid && this.shelterForm.controls.provinceId.touched }">
            <option *ngFor="let province of provinceList" [value]="province.id">{{province.name}}</option>
          </select>
        </div>
        <div class="flex flex-col">
          <label for="municipality" class="mx-4" i18n="@@shelter.form.field.municipality">Municipality</label>
          <input 
            type="text" 
            id="municipality" 
            formControlName="municipality" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.municipality.valid && this.shelterForm.controls.municipality.touched }">
        </div>
        <div class="flex flex-col">
          <label for="owner" class="mx-4" i18n="@@shelter.form.field.owner">Owner</label>
          <input 
            type="text" 
            id="owner" 
            formControlName="owner" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.owner.valid && this.shelterForm.controls.owner.touched }">
        </div>
        <div class="flex flex-col">
          <label for="name" class="mx-4" i18n="@@shelter.form.field.name.of.enplacement">Name of enplacement</label>
          <input 
            type="text" 
            id="name" 
            formControlName="name" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.name.valid && this.shelterForm.controls.name.touched }">
        </div>
        <div class="flex flex-col">
          <label for="longitude" class="mx-4" i18n="@@shelter.form.field.longitude">Longitued</label>
          <input 
            type="text" 
            id="longitude" 
            formControlName="longitude" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.longitude.valid && this.shelterForm.controls.longitude.touched }">
        </div>
        <div class="flex flex-col">
          <label for="latitude" class="mx-4" i18n="@@shelter.form.field.latitude">Latitude</label>
          <input 
            type="text" 
            id="latitude" 
            formControlName="latitude" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.latitude.valid && this.shelterForm.controls.latitude.touched }">
        </div>
        <div class="flex flex-col">
          <label for="surface" class="mx-4" i18n="@@shelter.form.field.surface">Inside surface of the building:</label>
          <input 
            type="number" 
            id="surface" 
            formControlName="surface" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.surface.valid && this.shelterForm.controls.surface.touched }">
        </div>
        <div class="flex flex-col">
          <label for="exteriorSurface" class="mx-4" i18n="@@shelter.form.field.exteriorSurface">Available exterior surface (removing road access):</label>
          <input 
            type="number" 
            id="exteriorSurface" 
            formControlName="exteriorSurface" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.exteriorSurface.valid && this.shelterForm.controls.exteriorSurface.touched }">
        </div>
        <div class="flex flex-col">
          <label for="bathroomSurface" class="mx-4" i18n="@@shelter.form.field.bathroomSurface">Bathroom surface:</label>
          <input 
            type="number" 
            id="bathroomSurface"
            formControlName="bathroomSurface" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.bathroomSurface.valid && this.shelterForm.controls.bathroomSurface.touched }">
        </div>
        <div class="flex flex-col">
          <label for="showerQuantity" class="mx-4" i18n="@@shelter.form.field.showerQuantity">How many showers are available?</label>
          <input 
            type="number" 
            id="showerQuantity"
            formControlName="showerQuantity" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.showerQuantity.valid && this.shelterForm.controls.showerQuantity.touched }">
        </div>
        <div class="flex flex-col">
          <label for="sinkQuantity" class="mx-4" i18n="@@shelter.form.field.sinkQuantity">How many sinks are available?</label>
          <input 
            type="number" 
            id="sinkQuantity"
            formControlName="sinkQuantity" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.sinkQuantity.valid && this.shelterForm.controls.sinkQuantity.touched }">
        </div>
        <div class="flex flex-col">
          <label for="toiletQuantity" class="mx-4" i18n="@@shelter.form.field.toiletQuantity">How many toilets are available?</label>
          <input 
            type="number" 
            id="toiletQuantity"
            formControlName="toiletQuantity" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.toiletQuantity.valid && this.shelterForm.controls.toiletQuantity.touched }">
        </div>
        <div class="flex flex-col">
          <label for="washingMachineQuantity" class="mx-4" i18n="@@shelter.form.field.washingMachineQuantity">How many washers/dryers are available?</label>
          <input 
            type="number" 
            id="washingMachineQuantity"
            formControlName="washingMachineQuantity" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.washingMachineQuantity.valid && this.shelterForm.controls.washingMachineQuantity.touched }">
        </div>
        <div class="flex flex-col">
          <label for="note" class="mx-4" i18n="@@shelter.form.field.notes">Notes</label>
          <textarea 
            type="text" 
            id="note" 
            formControlName="note" 
            class="form-input" 
            [attr.disabled]="validateMode || displayMode ? true : null"
            [ngClass]="{'input-error': !this.shelterForm.controls.note.valid && this.shelterForm.controls.note.touched }"></textarea>
        </div>
      </div>
      <div *ngIf="questionList.length > 0">
        <h2 i18n="@@shelter.form.title.question">Questions</h2>
        <table>
          <tr *ngFor="let question of questionList;let i = index">
            <td class="py-2">{{question.question}}</td>
            <td class="py-2">
              <input 
                type="checkbox" 
                [id]="'question-' + question.id" 
                [formControlName]="'question-' + question.id" 
                class="form-input" 
                [attr.disabled]="validateMode || displayMode ? true : null">
            </td>
          </tr>
        </table>
      </div>
      <div *ngIf="!displayMode">
        <button type="submit" class="btn btn-blue text-center w-full" *ngIf="!validateMode" i18n="@@shelter.form.button.save">Save</button>
        <button type="submit" class="btn btn-blue text-center w-full" *ngIf="validateMode" i18n="@@shelter.form.button.validate">Validate</button>
      </div>
    </form>
  </div>
</div>

